<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Custom Career Roadmap Generator - India</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    :root {
      --primary: #4361ee;
      --secondary: #3a0ca3;
      --accent: #4cc9f0;
      --light: #f8f9fa;
      --dark: #212529;
      --success: #4bb543;
      --gray: #6c757d;
      --light-gray: #e9ecef;
      --border-radius: 12px;
      --shadow: 0 10px 25px rgba(0,0,0,0.05);
      --transition: all 0.3s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .container {
      width: 100%;
      max-width: 800px;
      background: white;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
    }
    
    .header {
      background: var(--primary);
      color: white;
      padding: 25px;
      text-align: center;
    }
    
    .header h1 {
      font-weight: 600;
      font-size: 1.8rem;
      margin-bottom: 5px;
    }
    
    .header p {
      font-weight: 300;
      opacity: 0.9;
    }
    
    .form-container {
      padding: 30px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    label {
      display: block;
      font-weight: 500;
      margin-bottom: 8px;
      color: var(--dark);
    }
    
    input[type="text"] {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid var(--light-gray);
      border-radius: 8px;
      font-family: 'Inter', sans-serif;
      font-size: 15px;
      transition: var(--transition);
      background-color: var(--light);
    }
    
    input[type="text"]:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.15);
    }
    
    button {
      padding: 14px 28px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      width: 100%;
    }
    
    button:hover {
      background: var(--secondary);
      transform: translateY(-2px);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    button:disabled {
      background: var(--light-gray);
      color: var(--gray);
      cursor: not-allowed;
      transform: none;
    }
    
    .loader {
      display: none;
      text-align: center;
      padding: 20px;
    }
    
    .loader .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid var(--light-gray);
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .result-container {
      padding: 30px;
      display: none;
    }
    
    .result-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      color: var(--primary);
    }
    
    .result-header i {
      font-size: 24px;
      margin-right: 12px;
    }
    
    .result-header h3 {
      font-weight: 600;
      font-size: 1.4rem;
    }
    
    /* Tree-like roadmap layout */
    .roadmap-tree {
      position: relative;
      padding: 20px 0;
    }
    
    .tree-node {
      position: relative;
      padding-left: 30px;
      margin-bottom: 25px;
    }
    
    .tree-node:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 2px;
      height: 100%;
      background: var(--primary);
      opacity: 0.3;
    }
    
    .tree-node:after {
      content: '';
      position: absolute;
      top: 15px;
      left: 0;
      width: 20px;
      height: 2px;
      background: var(--primary);
      opacity: 0.3;
    }
    
    .node-content {
      background: white;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      border-left: 3px solid var(--primary);
      position: relative;
    }
    
    .node-title {
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }
    
    .node-title i {
      margin-right: 8px;
      font-size: 16px;
    }
    
    .node-desc {
      font-size: 14px;
      color: var(--dark);
      line-height: 1.5;
    }
    
    .tree-children {
      margin-top: 15px;
      padding-left: 30px;
      position: relative;
    }
    
    .tree-children:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 2px;
      height: 100%;
      background: var(--accent);
      opacity: 0.2;
    }
    
    .roadmap-download-btn {
      background: var(--success);
      margin-top: 20px;
      width: auto;
      margin-left: auto;
      margin-right: auto;
      display: block;
    }
    
    .roadmap-download-btn:hover {
      background: #3d9936;
    }
    
    .back-btn {
      background: var(--gray);
      margin-top: 20px;
      width: auto;
      margin-left: auto;
      margin-right: auto;
      display: block;
    }
    
    .back-btn:hover {
      background: #5a6268;
    }
    
    /* Print styles for roadmap download */
    @media print {
      body * {
        visibility: hidden;
      }
      .container, .container * {
        visibility: visible;
      }
      .container {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        margin: 0;
        box-shadow: none;
      }
      .roadmap-download-btn, .back-btn {
        display: none !important;
      }
    }
    
    @media (max-width: 600px) {
      body {
        padding: 10px;
      }
      
      .form-container, .result-container {
        padding: 20px 15px;
      }
      
      input[type="text"] {
        padding: 12px;
      }
      
      button {
        padding: 12px 20px;
        font-size: 14px;
      }
      
      .tree-node {
        padding-left: 20px;
      }
      
      .tree-children {
        padding-left: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Custom Career Roadmap Generator</h1>
      <p>Create a personalized career roadmap for any profession in India</p>
    </div>
    
    <div class="form-container" id="inputForm">
      <div class="form-group">
        <label for="careerInput">Enter the career you want a roadmap for:</label>
        <input type="text" id="careerInput" placeholder="e.g., Data Scientist, Digital Marketer, Product Manager" required>
      </div>
      <button id="generateBtn" onclick="generateRoadmap()">
        <i class="fas fa-road"></i> Generate Roadmap
      </button>
    </div>
    
    <div class="loader" id="loader">
      <div class="spinner"></div>
      <p style="margin-top: 15px;">Generating your career roadmap...</p>
    </div>
    
    <div class="result-container" id="resultContainer">
      <div class="result-header">
        <i class="fas fa-road"></i>
        <h3 id="roadmapTitle">Career Roadmap</h3>
      </div>
      <div id="roadmapContent">
        </div>
      <button class="roadmap-download-btn" onclick="downloadRoadmap()">
        <i class="fas fa-download"></i> Download Roadmap
      </button>
      <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i> Create Another Roadmap
      </button>
    </div>
  </div>

  <script>
    // Initialize jsPDF
    window.jsPDF = window.jspdf.jsPDF;

    // Replace with your Google Gemini API key
    const API_KEY = "Enter your API Key here";
    
    // DOM elements
    const careerInput = document.getElementById('careerInput');
    const generateBtn = document.getElementById('generateBtn');
    const loader = document.getElementById('loader');
    const inputForm = document.getElementById('inputForm');
    const resultContainer = document.getElementById('resultContainer');
    const roadmapTitle = document.getElementById('roadmapTitle');
    const roadmapContent = document.getElementById('roadmapContent');
    
    // Generate roadmap function
    async function generateRoadmap() {
      const career = careerInput.value.trim();
      
      if (!career) {
        alert('Please enter a career name');
        return;
      }
      
      // Show loader, hide form
      loader.style.display = 'block';
      inputForm.style.display = 'none';
      
      try {
        // Generate roadmap prompt
        const roadmapPrompt = `Create a detailed career roadmap for becoming a ${career} in India. 
        The roadmap should be structured as a hierarchical tree with main categories and sub-items.
        Focus on the key areas of learning and development.
        Include specific topics to learn, skills to develop, and milestones.
        Format as a JSON object with a 'title' property and a 'sections' array. 
        Each section should have a 'title', 'description', and 'items' array of objects with 'title' and 'description' properties.
        Do not include any additional text outside the JSON.`;
        
        // Call Gemini API for roadmap
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=${API_KEY}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            contents: [{
              parts: [{
                text: roadmapPrompt
              }]
            }],
            generationConfig: {
              temperature: 0.7,
              maxOutputTokens: 2000
            }
          })
        });

        if (!response.ok) {
          throw new Error(`API request failed with status ${response.status}`);
        }

        const data = await response.json();
        const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text || "No response from AI";
        
        // Try to parse the JSON response
        try {
          let jsonString = aiResponse;
          const jsonMatch = aiResponse.match(/```json\n([\s\S]*?)\n```/) || aiResponse.match(/```\n([\s\S]*?)\n```/);
          if (jsonMatch) {
            jsonString = jsonMatch[1];
          }
          
          const roadmapData = JSON.parse(jsonString);
          displayRoadmap(roadmapData, career);
        } catch (e) {
          console.error("Error parsing roadmap JSON:", e);
          // If we can't parse the JSON, show a default roadmap
          showDefaultRoadmap(career);
        }
      } catch (error) {
        console.error("Error fetching career roadmap:", error);
        // On error, show a default roadmap
        showDefaultRoadmap(career);
      } finally {
        loader.style.display = 'none';
        resultContainer.style.display = 'block';
      }
    }
    
    // Display default roadmap (fallback)
    function showDefaultRoadmap(career) {
      roadmapTitle.textContent = `${career} Roadmap`;
      
      roadmapContent.innerHTML = `
        <div class="roadmap-tree">
          <div class="tree-node">
            <div class="node-content">
              <div class="node-title"><i class="fas fa-graduation-cap"></i> Foundation Skills</div>
              <div class="node-desc">Build a strong foundation with these essential skills for ${career}</div>
            </div>
            <div class="tree-children">
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-book"></i> Learn the basics</div>
                  <div class="node-desc">Fundamental concepts and principles of ${career}</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-cube"></i> Core Knowledge</div>
                  <div class="node-desc">Essential theories and practices you need to master for ${career}</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-globe"></i> Industry Overview</div>
                  <div class="node-desc">Understanding the ${career} field and its applications in the Indian market</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="tree-node">
            <div class="node-content">
              <div class="node-title"><i class="fas fa-laptop-code"></i> Technical Skills</div>
              <div class="node-desc">Develop practical technical abilities for ${career}</div>
            </div>
            <div class="tree-children">
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-tools"></i> Tools & Technologies</div>
                  <div class="node-desc">Industry-standard software and platforms used in ${career}</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-code"></i> Technical Proficiency</div>
                  <div class="node-desc">Hands-on experience with key technologies for ${career}</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-check-circle"></i> Best Practices</div>
                  <div class="node-desc">Standards and methodologies used in the ${career} industry</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="tree-node">
            <div class="node-content">
              <div class="node-title"><i class="fas fa-briefcase"></i> Practical Application</div>
              <div class="node-desc">Apply your ${career} knowledge in real-world scenarios</div>
            </div>
            <div class="tree-children">
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-project-diagram"></i> Projects</div>
                  <div class="node-desc">Build portfolio pieces to demonstrate ${career} skills</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-building"></i> Internships</div>
                  <div class="node-desc">Gain real-world experience in ${career}</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-users"></i> Networking</div>
                  <div class="node-desc">Connect with ${career} professionals and join communities</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="tree-node">
            <div class="node-content">
              <div class="node-title"><i class="fas fa-chart-line"></i> Career Development</div>
              <div class="node-desc">Advance your professional journey in ${career}</div>
            </div>
            <div class="tree-children">
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-file-alt"></i> Job Search</div>
                  <div class="node-desc">Prepare resume and practice interviews for ${career} roles</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-sync-alt"></i> Continuous Learning</div>
                  <div class="node-desc">Stay updated with ${career} industry trends</div>
                </div>
              </div>
              <div class="tree-node">
                <div class="node-content">
                  <div class="node-title"><i class="fas fa-award"></i> Professional Growth</div>
                  <div class="node-desc">Seek advancement opportunities and certifications in ${career}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Display roadmap
    function displayRoadmap(roadmapData, career) {
      roadmapTitle.textContent = `${career} Roadmap`;
      
      let roadmapHTML = `
        <div class="roadmap-tree">
      `;
      
      if (roadmapData.sections && Array.isArray(roadmapData.sections)) {
        roadmapData.sections.forEach(section => {
          roadmapHTML += `
            <div class="tree-node">
              <div class="node-content">
                <div class="node-title"><i class="fas fa-layer-group"></i> ${section.title}</div>
                <div class="node-desc">${section.description || ''}</div>
              </div>
          `;
          
          if (section.items && Array.isArray(section.items)) {
            roadmapHTML += `<div class="tree-children">`;
            
            section.items.forEach(item => {
              roadmapHTML += `
                <div class="tree-node">
                  <div class="node-content">
                    <div class="node-title"><i class="fas fa-circle"></i> ${item.title}</div>
                    <div class="node-desc">${item.description || ''}</div>
                  </div>
                </div>
              `;
            });
            
            roadmapHTML += `</div>`;
          }
          
          roadmapHTML += `</div>`;
        });
      }
      
      roadmapHTML += `</div>`;
      
      roadmapContent.innerHTML = roadmapHTML;
    }
    
    // Download roadmap as PDF using jsPDF and html2canvas
    function downloadRoadmap() {
      const { jsPDF } = window.jspdf;
      
      // Create a temporary container for PDF content
      const pdfContainer = document.createElement('div');
      pdfContainer.style.position = 'absolute';
      pdfContainer.style.left = '-9999px';
      pdfContainer.style.width = '800px';
      pdfContainer.style.padding = '20px';
      pdfContainer.style.backgroundColor = 'white';
      pdfContainer.style.fontFamily = 'Inter, sans-serif';
      
      // Get the career title
      const careerTitle = roadmapTitle.textContent;
      
      // Create PDF header
      const pdfHeader = document.createElement('div');
      pdfHeader.style.textAlign = 'center';
      pdfHeader.style.marginBottom = '20px';
      pdfHeader.style.paddingBottom = '15px';
      pdfHeader.style.borderBottom = '2px solid #4361ee';
      
      pdfHeader.innerHTML = `
        <h1 style="color: #4361ee; font-size: 24px; margin-bottom: 5px;">${careerTitle}</h1>
        <p style="color: #6c757d; font-size: 16px;">Your personalized career development plan</p>
        <p style="color: #6c757d; font-size: 14px; margin-top: 10px;">Generated on: ${new Date().toLocaleDateString()}</p>
      `;
      
      pdfContainer.appendChild(pdfHeader);
      
      // Clone the roadmap content
      const roadmapClone = roadmapContent.cloneNode(true);
      pdfContainer.appendChild(roadmapClone);
      
      // Add PDF footer
      const pdfFooter = document.createElement('div');
      pdfFooter.style.marginTop = '30px';
      pdfFooter.style.paddingTop = '15px';
      pdfFooter.style.borderTop = '1px solid #e9ecef';
      pdfFooter.style.textAlign = 'center';
      pdfFooter.style.color = '#6c757d';
      pdfFooter.style.fontSize = '14px';
      
      pdfFooter.innerHTML = `
        <p>Custom Career Roadmap Generator | Your Personal Career Guide</p>
        <p>Generated on ${new Date().toLocaleDateString()}</p>
      `;
      
      pdfContainer.appendChild(pdfFooter);
      
      // Add to document
      document.body.appendChild(pdfContainer);
      
      // Create PDF using html2canvas and jsPDF
      html2canvas(pdfContainer, {
        scale: 2,
        useCORS: true,
        logging: false
      }).then(canvas => {
        const imgData = canvas.toDataURL('image/jpeg', 1.0);
        const doc = new jsPDF('p', 'mm', 'a4');
        
        const imgWidth = 210; // A4 width in mm
        const pageHeight = 297; // A4 height in mm
        const imgHeight = canvas.height * imgWidth / canvas.width;
        
        let heightLeft = imgHeight;
        let position = 0;
        
        // Add first page
        doc.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);
        heightLeft -= pageHeight;
        
        // Add additional pages if needed
        while (heightLeft >= 0) {
          position = heightLeft - imgHeight;
          doc.addPage();
          doc.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight);
          heightLeft -= pageHeight;
        }
        
        // Save the PDF
        doc.save(`${careerTitle.replace(/\s+/g, '_')}_Roadmap.pdf`);
        
        // Clean up
        document.body.removeChild(pdfContainer);
      });
    }
    
    // Go back to input form
    function goBack() {
      resultContainer.style.display = 'none';
      inputForm.style.display = 'block';
      careerInput.value = '';
    }
    
    // Allow form submission with Enter key
    careerInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        generateRoadmap();
      }
    });
  </script>
</body>
</html>
